(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[8549],{48549:(x,b,o)=>{o.r(b),o.d(b,{CrtValuePickerBaseComponent:()=>k,CrtValuePickerComponentResolverService:()=>s,CrtValuePickerElement:()=>W,CrtValuePickerReadonlyComponent:()=>c,ValuePickerComponent:()=>d,ValuePickerElementRegistry:()=>V,ValuePickerModule:()=>f,ValuePickerProviderResolver:()=>v,ValuePickerViewFactory:()=>u});var p=o(31134),m=o(34560),_=o(72856),P=o(14535),S=o(30738),y=o(32820),h=o(99293),D=o(33177),I=o(16245),t=o(94450),F=o(21322);const N=["elementContainer"];class C{set element(e){this._element=e,this._containerRef.nativeElement.appendChild(e)}set value(e){this._element.value=e}get value(){return this._element.value}set config(e){this._element.config=e}set placeholder(e){this._element.placeholder=e}get valueChanged(){return(0,F.fromEvent)(this._element,"valueChanged")}ngOnDestroy(){this._containerRef.nativeElement.removeChild(this._element)}}C.\u0275fac=function(e){return new(e||C)},C.\u0275cmp=t.\u0275\u0275defineComponent({type:C,selectors:[["crt-value-picker-web-element-wrapper"]],viewQuery:function(e,n){if(e&1&&t.\u0275\u0275viewQuery(N,7),e&2){let r;t.\u0275\u0275queryRefresh(r=t.\u0275\u0275loadQuery())&&(n._containerRef=r.first)}},decls:2,vars:0,consts:[[1,"value-picker-web-element-wrapper"],["elementContainer",""]],template:function(e,n){e&1&&t.\u0275\u0275element(0,"div",0,1)},styles:["[_nghost-%COMP%]   .value-picker-web-element-wrapper[_ngcontent-%COMP%]{display:inline}"]});var j=o(71689),T=o(96308),B=o(66868),L=o(54514),w=o(97600),R=o(27049);class V{static _getRegisteredItem(e,n){return Array.from(this._registry.values()).find(r=>r.sources.includes(n)&&r.dataValueTypes.includes(e))}static _getDefault(){return Array.from(this._registry.values()).find(e=>e.default)}static register(e){this._registry.set(e.selector,e)}static get(e,n){return this._getRegisteredItem(e,n)??V._getDefault()}static has(e,n){return!!this._getRegisteredItem(e,n)}}V._registry=new Map;class s{resolve(e,n){return V.get(n,e).selector}}s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=t.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac});class u{constructor(e,n){this._resolver=e,this._rendererFactory=n}create(e,n,r){const l=this._resolver.resolve(e,n),M=this._rendererFactory.createRenderer(null,null).createElement(l),E=r.createComponent(C);return E.instance.element=M,E}}u.\u0275fac=function(e){return new(e||u)(t.\u0275\u0275inject(s),t.\u0275\u0275inject(t.RendererFactory2))},u.\u0275prov=t.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac});class v{constructor(e){this._providers=e}getProviderByTypeSource(e){return this._providers.find(n=>n.source===e)}getProviders(){return this._providers}}v.\u0275fac=function(e){return new(e||v)(t.\u0275\u0275inject(I.VALUE_PICKER_PROVIDER))},v.\u0275prov=t.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac});const O=["main"];function A(i,e){if(i&1&&(t.\u0275\u0275elementStart(0,"div",12),t.\u0275\u0275element(1,"mat-icon",13),t.\u0275\u0275elementEnd()),i&2){const n=t.\u0275\u0275nextContext();t.\u0275\u0275property("title",n.providerInfo==null?null:n.providerInfo.caption),t.\u0275\u0275advance(1),t.\u0275\u0275property("svgIcon",n.providerInfo==null?null:n.providerInfo.icon)}}function Q(i,e){}const H=function(i){return{width:i}};function z(i,e){if(i&1){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",15),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(n).$implicit,M=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(M.onMenuClick(a))}),t.\u0275\u0275element(2,"mat-icon",16),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(i&2){const n=e.$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngStyle",t.\u0275\u0275pureFunction1(3,H,r.menuElementWidth+"px")),t.\u0275\u0275advance(1),t.\u0275\u0275property("svgIcon",n.iconName),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.caption," ")}}function $(i,e){if(i&1&&t.\u0275\u0275template(0,z,4,5,"ng-container",14),i&2){const n=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngForOf",n.menuItems)}}const U=function(i){return{"fit-inner-component":i}};class d extends h.BaseMaterialInput{constructor(e,n,r,l,a,M,E,J){super(e,n,r),this._resolver=l,this._maskService=E,this._valuePickerViewFactory=J,this._destroyed$=new F.Subject,this._minMenuElementWidth=160,this.selected=new t.EventEmitter,this.controlType="ts-value-picker",this.fitInnerComponent=!1,a.addSvgIconLiteral("lightning",M.bypassSecurityTrustHtml(o(81829))),this.menuElementWidth=this._minMenuElementWidth}get _providers(){return this._resolver.getProviders()}get component(){return this._component.instance}get config(){return this._config}set config(e){(0,w.isEqual)(this._config,e)||(this._config=e,this._config&&this._component&&this._initMenuItems())}get selectedValue(){return this._selectedValue}set selectedValue(e){(0,w.isEqual)(this._selectedValue,e)||(this._selectedValue=e,this._component?.instance&&this._setInnerComponentValue(this._selectedValue))}_viewClear(){const e=this.container&&this.container.viewContainerRef;e&&e.clear()}_getProviderBySource(e){return this._resolver.getProviderByTypeSource(e)}_getProviderConfigBySource(e){return this._config?.sourcesConfig?this._config?.sourcesConfig[e]:null}_initMenuItems(){this.menuItems=(0,w.flatMap)(this._providers,e=>e.getActionItems(this._config.columnType,this._config?.sourcesConfig?this._config.sourcesConfig[e.source]:null))}_setComponentConfig(){let e={};this._config?.columnType?.dataValueType&&(e.dataValueType=this._config.columnType.dataValueType);const n=this._getProviderConfigBySource(this._currentSource);n&&(e={...e,...n}),this.component.config=e}_generateComponent(){this._viewClear(),this._component=this._valuePickerViewFactory.create(this._currentSource,this._config?.columnType?.dataValueType,this.container.viewContainerRef),this._setComponentConfig(),this.component.valueChanged.pipe((0,R.distinctUntilChanged)(),(0,R.takeUntil)(this._destroyed$)).subscribe(e=>{this._handleValueChangedEvent(e.detail)})}_setValuePickerInfo(e){const n=this._getProviderBySource(e);n&&(this.providerInfo={caption:n.getSourceCaption(),icon:n.getSourceIconName()})}_setInnerComponentPlaceholder(e){const n=this._getProviderBySource(e);n&&(this.component.placeholder=n.getSourcePlaceholder())}_setInnerComponentValue(e){if(!e){this.component.value=null;return}if(e.displayValue){this.component.value=e;return}const n=this._getProviderBySource(e.source),r=this._getProviderConfigBySource(e.source);if(n){this._maskService.showBodyMask(),n.initValuePickerResult(r,e.value).subscribe(l=>{this.component.value=l,this._maskService.hideBodyMask()});return}this.component.value=null}_isValueChanged(e){const n=!e&&!this._selectedValue?.value,r=(0,w.isEqual)(e,this._selectedValue?.value);return!n&&!r}_handleValueChangedEvent(e){if(this._isValueChanged(e)){const n=e?.displayValue?e.value:e;this._selectedValue={source:this._currentSource,value:n,displayValue:e?.displayValue},this.selected.emit(this._selectedValue)}}_setMenuWidth(e){if(!e?.nativeElement)return;const{width:n}=e.nativeElement.getBoundingClientRect();this.menuElementWidth=n<this._minMenuElementWidth?this._minMenuElementWidth:n}onResize(){this._setMenuWidth(this.elementRef)}onMenuClick({source:e}){const n=this._getProviderBySource(e),r=this._getProviderConfigBySource(e),l=(this._selectedValue&&this._selectedValue.source)===e?this._selectedValue:null;n.handleSelectAction(r,l).pipe((0,R.takeUntil)(this._destroyed$)).subscribe(a=>{a&&a.source!==this._currentSource&&(this._currentSource=a.source,this._generateComponent(),this._setInnerComponentPlaceholder(this._currentSource),this._setValuePickerInfo(this._currentSource)),a&&a.value!=null&&(this._selectedValue=a,this._setInnerComponentValue(a),this.selected.emit(a))})}ngOnInit(){this._currentSource=this._selectedValue?.source??this.defaultSource,this._generateComponent(),this._setInnerComponentValue(this.selectedValue),this._setInnerComponentPlaceholder(this._currentSource),this._setValuePickerInfo(this._currentSource),this._config&&this._initMenuItems()}ngAfterViewInit(){this.valuePickerEl.changes.subscribe({next:e=>{this._setMenuWidth(e.last),this.elementRef=e.last}}),setTimeout(()=>{this.valuePickerEl.notifyOnChanges()})}ngOnDestroy(){this._viewClear(),this._destroyed$.next(),this._destroyed$.complete()}}d.\u0275fac=function(e){return new(e||d)(t.\u0275\u0275directiveInject(m.NgControl,10),t.\u0275\u0275directiveInject(T.AutofillMonitor),t.\u0275\u0275directiveInject(j.FocusMonitor),t.\u0275\u0275directiveInject(I.VALUE_PICKER_RESOLVER),t.\u0275\u0275directiveInject(_.MatIconRegistry),t.\u0275\u0275directiveInject(L.DomSanitizer),t.\u0275\u0275directiveInject(h.MaskService),t.\u0275\u0275directiveInject(u))},d.\u0275cmp=t.\u0275\u0275defineComponent({type:d,selectors:[["ts-value-picker"]],viewQuery:function(e,n){if(e&1&&(t.\u0275\u0275viewQuery(h.ViewContainerRefDirective,7),t.\u0275\u0275viewQuery(O,5,t.ElementRef)),e&2){let r;t.\u0275\u0275queryRefresh(r=t.\u0275\u0275loadQuery())&&(n.container=r.first),t.\u0275\u0275queryRefresh(r=t.\u0275\u0275loadQuery())&&(n.valuePickerEl=r)}},hostBindings:function(e,n){e&1&&t.\u0275\u0275listener("resize",function(l){return n.onResize(l)},!1,t.\u0275\u0275resolveWindow)},inputs:{config:"config",selectedValue:"selectedValue",defaultSource:"defaultSource",fitInnerComponent:"fitInnerComponent"},outputs:{selected:"selected"},features:[t.\u0275\u0275ProvidersFeature([{provide:B.MatLegacyFormFieldControl,useExisting:d}]),t.\u0275\u0275InheritDefinitionFeature],decls:12,vars:6,consts:[[1,"value-picker-ct"],["main",""],[1,"value-picker-input-ct",3,"ngClass"],["class","value-picker-input-icon",3,"title",4,"ngIf"],[1,"value-picker-input-template-wrapper"],["tsViewContainerRef",""],[1,"value-picker-input-btn-container"],["mat-icon-button","",1,"value-picker-input-btn",3,"disabled","matMenuTriggerFor"],["svgIcon","lightning",1,"lightning-icon"],["xPosition","before",1,"value-picker-menu"],["menu","matMenu"],["matMenuContent",""],[1,"value-picker-input-icon",3,"title"],[1,"provider-icon",3,"svgIcon"],[4,"ngFor","ngForOf"],["mat-menu-item","",1,"value-picker-menu-item",3,"ngStyle","click"],[1,"value-picker-icon",3,"svgIcon"]],template:function(e,n){if(e&1&&(t.\u0275\u0275elementStart(0,"div",0,1)(2,"div",2),t.\u0275\u0275template(3,A,2,2,"div",3),t.\u0275\u0275elementStart(4,"div",4),t.\u0275\u0275template(5,Q,0,0,"ng-template",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",6)(7,"button",7),t.\u0275\u0275element(8,"mat-icon",8),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(9,"mat-menu",9,10),t.\u0275\u0275template(11,$,1,1,"ng-template",11),t.\u0275\u0275elementEnd()()),e&2){const r=t.\u0275\u0275reference(10);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(4,U,n.fitInnerComponent)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.providerInfo==null?null:n.providerInfo.icon),t.\u0275\u0275advance(4),t.\u0275\u0275property("disabled",n.disabled||!n.config)("matMenuTriggerFor",r)}},dependencies:[p.NgClass,p.NgForOf,p.NgIf,p.NgStyle,P.MatLegacyButton,_.MatIcon,y.MatLegacyMenu,y.MatLegacyMenuItem,y.MatLegacyMenuTrigger,y.MatLegacyMenuContent,h.ViewContainerRefDirective],styles:[`.value-picker-ct{flex:1}.value-picker-input-ct{display:flex;align-items:flex-end;gap:8px}.value-picker-input-ct .value-picker-input-btn{visibility:hidden}.value-picker-input-ct:hover .value-picker-input-btn{visibility:visible}.value-picker-input-ct .value-picker-input-template-wrapper{flex-grow:1;line-height:11.25px}.value-picker-input-ct.fit-inner-component .value-picker-input-template-wrapper{flex-grow:0}.value-picker-input-ct.fit-inner-component .value-picker-input-btn-container{padding-bottom:6px}.value-picker-input-ct.fit-inner-component .value-picker-input-icon{padding-bottom:4px}.value-picker-input-ct .value-picker-input-btn{display:flex;flex-direction:row;align-items:center;justify-content:center;cursor:pointer}.value-picker-input-ct .value-picker-input-btn.mat-icon-button{width:16px;height:16px;line-height:1;margin:0 0 2px 5px}.value-picker-input-ct .mat-icon.lightning-icon{width:16px;height:16px}.value-picker-input-ct .mat-icon.provider-icon{width:12px;height:14px}.mat-menu-panel.value-picker-menu{max-width:400px;min-width:160px}.mat-menu-panel.value-picker-menu .value-picker-menu-item{padding-left:0}.mat-menu-panel.value-picker-menu .value-picker-menu-item .value-picker-icon{width:16px;height:16px;margin:0 8px 2px}
`],encapsulation:2});class k{constructor(){this.valueChanged=new t.EventEmitter}get value(){return this._value}set value(e){this._value=e}set config(e){this._config=e}get config(){return this._config}}k.\u0275fac=function(e){return new(e||k)},k.\u0275dir=t.\u0275\u0275defineDirective({type:k,inputs:{value:"value",placeholder:"placeholder",config:"config"},outputs:{valueChanged:"valueChanged"}});var K=o(74742);function W(i){return function(e){V.register(i)}}function G(i,e){if(i&1){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",4),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.clearValue())}),t.\u0275\u0275element(1,"mat-icon",5),t.\u0275\u0275elementEnd()}}class g extends h.BaseMaterialInput{constructor(e,n,r,l,a){super(e,n,r),this.valueCleared=new t.EventEmitter,l.addSvgIconLiteral("close",a.bypassSecurityTrustHtml(o(5968)))}clearValue(){this.innerValue="",this.valueCleared.emit()}}g.\u0275fac=function(e){return new(e||g)(t.\u0275\u0275directiveInject(m.NgControl,10),t.\u0275\u0275directiveInject(T.AutofillMonitor),t.\u0275\u0275directiveInject(j.FocusMonitor),t.\u0275\u0275directiveInject(_.MatIconRegistry),t.\u0275\u0275directiveInject(L.DomSanitizer))},g.\u0275cmp=t.\u0275\u0275defineComponent({type:g,selectors:[["ts-readonly"]],outputs:{valueCleared:"valueCleared"},features:[t.\u0275\u0275ProvidersFeature([{provide:B.MatLegacyFormFieldControl,useExisting:g}]),t.\u0275\u0275InheritDefinitionFeature],decls:4,vars:3,consts:[[1,"readonly-container"],["matInput","","readonly","","disabled","",1,"disable-input",3,"ngModel","placeholder","ngModelChange"],["input",""],["mat-icon-button","","class","close-button",3,"click",4,"ngIf"],["mat-icon-button","",1,"close-button",3,"click"],["svgIcon","close",1,"close-icon"]],template:function(e,n){e&1&&(t.\u0275\u0275elementStart(0,"div",0)(1,"input",1,2),t.\u0275\u0275listener("ngModelChange",function(l){return n.innerValue=l}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,G,2,0,"button",3),t.\u0275\u0275elementEnd()),e&2&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngModel",n.innerValue)("placeholder",n.placeholder),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.innerValue))},dependencies:[p.NgIf,m.DefaultValueAccessor,m.NgControlStatus,m.NgModel,P.MatLegacyButton,S.MatLegacyInput,_.MatIcon],styles:[`.readonly-container{display:flex;flex-direction:row}.readonly-container:hover .close-button{visibility:visible}.readonly-container:not(:hover) .close-button{visibility:hidden}.readonly-container .mat-icon-button.close-button{width:16px;height:16px;line-height:1;margin:0 0 2px 5px}.readonly-container .mat-icon.close-icon{width:16px;height:16px}.readonly-container .disable-input{text-overflow:ellipsis;overflow:hidden;color:#444;-webkit-text-fill-color:#444444}.cdk-overlay-container .mat-tooltip.readonly-container-tooltip{margin-top:8px;padding:10px;font-size:14px;line-height:19px;color:#444;max-width:350px;background:#ffffff;word-break:break-word;box-shadow:#0000004d 0 0 .2em;border-radius:0;border-top:2px solid #22ac14;white-space:pre-line;text-overflow:clip}
`],encapsulation:2});let c=class extends k{clearValue(){this.value={source:this.value.source,value:"",displayValue:""},this.valueChanged.emit("")}};c.\u0275fac=function(){let i;return function(n){return(i||(i=t.\u0275\u0275getInheritedFactory(c)))(n||c)}}(),c.\u0275cmp=t.\u0275\u0275defineComponent({type:c,selectors:[["crt-value-picker-readonly"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[[3,"value","placeholder","valueCleared"]],template:function(e,n){e&1&&(t.\u0275\u0275elementStart(0,"ts-readonly",0),t.\u0275\u0275listener("valueCleared",function(){return n.clearValue()}),t.\u0275\u0275elementEnd()),e&2&&t.\u0275\u0275property("value",n.value==null?null:n.value.displayValue)("placeholder",n.placeholder)},dependencies:[g],encapsulation:2}),c=(0,K.__decorate)([W({dataValueTypes:[],selector:"crt-value-picker-readonly",sources:[],default:!0})],c);class f{constructor(e){e.defineComponent("crt-value-picker-readonly",c)}}f.\u0275fac=function(e){return new(e||f)(t.\u0275\u0275inject(D.CustomElementsBootstrapService))},f.\u0275mod=t.\u0275\u0275defineNgModule({type:f}),f.\u0275inj=t.\u0275\u0275defineInjector({providers:[{provide:I.VALUE_PICKER_RESOLVER,useClass:v},s,u],imports:[p.CommonModule,m.FormsModule,P.MatLegacyButtonModule,S.MatLegacyInputModule,_.MatIconModule,y.MatLegacyMenuModule,I.ValuePickerTypesModule,h.ViewContainerRefModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&t.\u0275\u0275setNgModuleScope(f,{declarations:[d,g,c,C],imports:[p.CommonModule,m.FormsModule,P.MatLegacyButtonModule,S.MatLegacyInputModule,_.MatIconModule,y.MatLegacyMenuModule,I.ValuePickerTypesModule,h.ViewContainerRefModule],exports:[d]})}()},5968:x=>{x.exports=`<svg id="Group_7" data-name="Group 7" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
  <rect id="Rectangle_7" data-name="Rectangle 7" width="16" height="16" fill="none"/>
  <line id="Line_5" data-name="Line 5" y1="10" x2="10" transform="translate(3 3)" fill="none" stroke="#54657d" stroke-miterlimit="10" stroke-width="1"/>
  <line id="Line_6" data-name="Line 6" x2="10" y2="10" transform="translate(3 3)" fill="none" stroke="#54657d" stroke-miterlimit="10" stroke-width="1"/>
</svg>
`},81829:x=>{x.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7.24213 2.29936C7.3158 2.11775 7.48481 2 7.67181 2H10.3725C10.7507 2 10.9723 2.44981 10.7555 2.77718L8.74663 5.80929C8.52974 6.13666 8.7514 6.58647 9.1296 6.58647H11.5316C11.935 6.58647 12.149 7.09001 11.881 7.40855L6.39275 13.9322C6.25182 14.0997 5.99756 13.9291 6.08112 13.7231L7.95246 9.10955C8.08467 8.78363 7.85839 8.42106 7.52278 8.42106H5.46798C5.13237 8.42106 4.9061 8.05849 5.0383 7.73256L7.24213 2.29936Z" fill="#0D2E4E"/>
</svg>
`}}]);
