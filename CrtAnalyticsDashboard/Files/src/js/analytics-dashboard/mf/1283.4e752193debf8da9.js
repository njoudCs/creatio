(self.webpackChunkapp_studio_enterprise_analytics_dashboard=self.webpackChunkapp_studio_enterprise_analytics_dashboard||[]).push([[1283],{49465:(ke,Ae,y)=>{y.r(Ae),y.d(Ae,{ApplicabilityType:()=>ie,BaseBusinessRuleDesignAction:()=>Q,BaseBusinessRuleDesignCondition:()=>S,BusinessRuleAttributeDesignExpression:()=>B,BusinessRuleDesign:()=>re,BusinessRuleDesignAction:()=>m,BusinessRuleDesignActionFactory:()=>Se,BusinessRuleDesignCase:()=>K,BusinessRuleDesignCondition:()=>H,BusinessRuleDesignConditionFactory:()=>Ie,BusinessRuleDesignEmptyCondition:()=>P,BusinessRuleDesignExpression:()=>g,BusinessRuleDesignExpressionFactory:()=>xe,BusinessRuleDesignTrigger:()=>Z,BusinessRuleEditableElementDesignAction:()=>v,BusinessRuleEmptyValueDesignExpression:()=>Me,BusinessRuleFieldSelectionElementDesignAction:()=>A,BusinessRuleFilterLookupAction:()=>D,BusinessRuleFilterLookupDesignExpression:()=>F,BusinessRuleFilterValueDesignExpression:()=>ee,BusinessRuleGroupDesignCondition:()=>z,BusinessRuleHideElementDesignAction:()=>G,BusinessRuleOptionalElementDesignAction:()=>L,BusinessRulePropertiesPanelService:()=>I,BusinessRuleReadOnlyElementDesignAction:()=>k,BusinessRuleRequiredElementDesignAction:()=>j,BusinessRuleSetFilterAction:()=>U,BusinessRuleSetPropertyDesignAction:()=>be,BusinessRuleSetValueDesignAction:()=>O,BusinessRuleSetValueItem:()=>q,BusinessRuleSetValuesDesignAction:()=>W,BusinessRuleShowElementDesignAction:()=>$,BusinessRuleSysSettingDesignExpression:()=>se,BusinessRuleSysValueDesignExpression:()=>te,BusinessRuleValueDesignExpression:()=>N,BusinessRulesApplier:()=>M,BusinessRulesConditionExecutor:()=>R,BusinessRulesEngine:()=>_,BusinessRulesFilterLookupActionApplier:()=>ye,BusinessRulesModule:()=>w,BusinessRulesSetFilterActionApplier:()=>ge,BusinessRulesSetPropertyActionApplier:()=>Y,BusinessRulesSetReadonlyPropertyActionApplier:()=>me,BusinessRulesSetRequiredPropertyActionApplier:()=>Re,BusinessRulesSetValueActionApplier:()=>ae,BusinessRulesSetVisibilityPropertyActionApplier:()=>fe,BusinessRulesTriggerExecutor:()=>x,ScopeStateType:()=>ue,ScopeType:()=>V,TestBusinessRuleDesignAction:()=>oe,businessRuleEditableElementTypeName:()=>Te,businessRuleOptionalElementTypeName:()=>Ee,businessRuleReadonlyElementTypeName:()=>Ve,businessRuleRequiredElementTypeName:()=>Be,generateBusinessRuleName:()=>Le});var b=y(74742),o=y(75378),a=y(49475),p=y(21322),h=y(94450);class d{static register(e,s){d._actionAppliers.set(e,s)}get(e){const s=d._actionAppliers.get(e.typeName);if(!s)throw new Error(`Business rule applier for change type ${e.typeName} not found.`);return new s(e)}}d._actionAppliers=new Map,d.\u0275fac=function(e){return new(e||d)},d.\u0275prov=h.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac});function T(r){return function(e){(0,o.checkTypeNameFormat)(r.type,"BusinessRulesActionApplierTypeName"),(0,o.checkCrtTypeNamePascalCase)(r.type),d.register(r.type,e)}}var V;(function(r){r.Model="Model",r.ViewModel="ViewModel"})(V||(V={}));var ue;(function(r){r.Unknown="Unknown",r.Init="Init",r.Create="Create",r.Copy="Copy",r.Update="Update"})(ue||(ue={}));class X{constructor(e){this.action=e}_logError(e){return console.error("Error when applying business rule",this.action),console.error(e),(0,p.of)(null)}apply(e,s){let t;try{t=this.innerApply(e,s)}catch(i){return this._logError(i)}return t.pipe((0,p.catchError)(i=>this._logError(i)))}}var E=y(8239);class Ce{static _getPrimaryDisplayAttributeName(e){return(0,E.Z)(function*(){return(yield e.getSchema()).primaryDisplayAttributeName})()}static getLookupValue(e,s){var t=this;return(0,E.Z)(function*(){const i=yield o.Model.create(e),n=yield i.load({parameters:[{type:o.ModelParameterType.PrimaryColumnValue,value:s}]});if(!n||n.length===0)throw new Error(`Can't find value for '${s}'`);if(n.length>1)throw new Error(`Load more than 1 data row for '${s}'`);const u=n[0],l=yield t._getPrimaryDisplayAttributeName(i);return Promise.resolve({value:s,displayValue:u[l]})})()}}let ae=class extends X{_getValue(e){const s=e.value,t=s.value;if(t==null)return(0,p.of)(t);const i=s.dataValueTypeName,u=Object.values(a.DataValueTypeItems).find(c=>c.name===i)?.type??o.DataValueType.Text,l=(0,a.parseJsonValue)(t,u);return u===o.DataValueType.Lookup?(0,p.from)(Ce.getLookupValue(s.referenceSchemaName,s.value)):(0,p.of)(l)}_setValue(e,s,t){const i=this.action.path,n=e.getViewModelAttributePath(s,i);return n?e.setValue({[n]:t}):e.setModelValues(s,{[i]:t})}innerApply(e,s){const t=this.action,i=t.value;return t.skip===!0?(0,p.of)(null):this._getValue(t).pipe((0,p.switchMap)(n=>{if(s.type===V.Model)return this._setValue(e,s.id,n);if(i.scope)return this._setValue(e,i.scope,n);const u=e.getAttributeNameByViewItemName(t.path);return u?e.setValue({[u]:n}):e.setValue({[t.path]:n})}))}};ae=(0,b.__decorate)([T({type:"crt.SetValue"})],ae);class Y extends X{_getAttributeNames(e,s,t){if(s.type===V.Model)return e.getViewModelAttributePaths(s.id,t);let i=e.getAttributeNameByViewItemName(t);return i||(i=(0,a.generatePropertiesAttributeName)(t)),[i]}setAttributePropertyValue(e,s,t){e.setAttributePropertyValue(s,this.propertyName,t)}resetAttributePropertyValue(e,s){e.resetAttributePropertyValue(s,this.propertyName)}innerApply(e,s){const t=this.action.path;if(!t)return(0,p.of)(!0);const n=t.split(":")[0],u=this._getAttributeNames(e,s,n);return u&&u.forEach(l=>{this.action.resetToDefault?this.resetAttributePropertyValue(e,l):this.setAttributePropertyValue(e,l,this.action.value)}),(0,p.of)(!0)}}function _e(r,e){return le.apply(this,arguments)}function le(){return le=(0,E.Z)(function*(r,e){let s=yield r[e];return s instanceof o.FilterGroup||(s=new o.FilterGroup,r[e]=s),s}),le.apply(this,arguments)}function Pe(r,e,s){return pe.apply(this,arguments)}function pe(){return pe=(0,E.Z)(function*(r,e,s){return(yield _e(r,e)).filters.get(s)||new o.FilterGroup(o.LogicalOperatorType.And)}),pe.apply(this,arguments)}function ve(r,e,s,t){return ce.apply(this,arguments)}function ce(){return ce=(0,E.Z)(function*(r,e,s,t){const i=yield _e(r,e);i.add(t,s),r[e]=i}),ce.apply(this,arguments)}function Fe(r,e,s){return r.getViewModelAttributePaths(e,s).map(n=>(0,a.getItemsAttributeName)(n)).map(n=>(0,a.getBusinessRuleFilterAttributeName)(n))}function he(r,e,s,t,i,n){return de.apply(this,arguments)}function de(){return de=(0,E.Z)(function*(r,e,s,t,i,n){const u=Fe(r,e,s);for(const l of u){const c=yield Pe(r,l,i);c.add(t,n),yield ve(r,l,i,c)}}),de.apply(this,arguments)}let ye=class extends X{_createLookupFilterGroup(e,s){const t=new o.FilterGroup(o.LogicalOperatorType.And),i=new o.CompareFilter(o.ComparisonType.Equal,new o.ColumnExpression({columnPath:e}),new o.ParameterExpression({value:s}));return t.add(i,"lookupFilter"),t}_setFilterForScope(e,s){const t=this.action,i=t.path;if(t.value){const{leftExpression:n,rightExpression:u}=t.value,l=this._createLookupFilterGroup(n,u.value);return he(e,s,i,l,t.businessRuleUId,t.actionUId)}return he(e,s,i,new o.FilterGroup,t.businessRuleUId,t.actionUId)}innerApply(e,s){const t=this._setFilterForScope(e,s.id);return(0,p.from)(t)}};ye=(0,b.__decorate)([T({type:"crt.FilterLookup"})],ye);let ge=class extends X{_getFilter(e){if(e){const s=e.value,t=JSON.parse(s);return o.FilterParser.fromJson(t)}else return new o.FilterGroup}innerApply(e,s){const t=this.action,i=this._getFilter(t.value),n=he(e,s.id,t.path,i,t.businessRuleUId,t.actionUId);return(0,p.from)(n)}};ge=(0,b.__decorate)([T({type:"crt.SetFilter"})],ge);let fe=class extends Y{constructor(){super(...arguments),this.propertyName="visible"}};fe=(0,b.__decorate)([T({type:"crt.SetVisibilityPropertyActionApplier"})],fe);let me=class extends Y{constructor(){super(...arguments),this.propertyName="readonly"}_getPropertyName(e,s){const t=e.getAttributePropertyValue(s,o.ViewElementProperty.Readonly),i=e.getAttributePropertyValue(s,o.ViewElementProperty.Disabled);return t??i??this.propertyName}setAttributePropertyValue(e,s,t){const i=this._getPropertyName(e,s);e.setAttributePropertyValue(s,i,t)}resetAttributePropertyValue(e,s){const t=this._getPropertyName(e,s);e.resetAttributePropertyValue(s,t)}};me=(0,b.__decorate)([T({type:"crt.SetReadonlyPropertyActionApplier"})],me);let Re=class extends Y{constructor(){super(...arguments),this.propertyName="required"}};Re=(0,b.__decorate)([T({type:"crt.SetRequiredPropertyActionApplier"})],Re);class S{constructor(e){this.typeName="Terrasoft.Core.BusinessRules.Models.Conditions.BaseBusinessRuleDesignCondition",e?this.uId=e?.uId:this.uId=(0,o.generateGuid)()}toMetadata(){return{typeName:this.typeName,uId:this.uId}}copy(){return new S({...this.toMetadata(),uId:(0,o.generateGuid)()})}isValid(){return Boolean(this.uId)}onDataSourceAttributeNameChanged(e,s,t){}getWarningMessages(){return[]}}class P extends S{}class Q{constructor(e){this.typeName="Terrasoft.Core.BusinessRules.Models.BusinessRuleAction",this.enabled=!0,this.uId=e?.uId||(0,o.generateGuid)(),e&&(this.enabled=e.enabled)}toMetadata(){return{typeName:this.typeName,uId:this.uId,enabled:this.enabled}}getTypeName(){return this.typeName}getApplicability(){return[]}isValid(){return!0}onDataSourceAttributeNameChanged(e,s,t){}}class g{get dataValueTypeName(){return this._dataValueTypeName}set dataValueTypeName(e){this._dataValueTypeName=e}get isLookup(){return this.dataValueTypeName===a.DataValueTypeItems[o.DataValueType.Lookup].name}get referenceSchemaName(){return this._referenceSchemaName}set referenceSchemaName(e){this._referenceSchemaName!==e&&(this._referenceSchemaName=e)}constructor(e){this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleExpression",this._dataValueTypeName="",this._referenceSchemaName="",this.type=a.BusinessRuleExpressionType.Const,this.uId=e?.uId||(0,o.generateGuid)(),e&&(this._dataValueTypeName=e.dataValueTypeName??"",this.type=e.type||this.type,this._referenceSchemaName=e.referenceSchemaName??"")}toMetadata(){return{typeName:this.typeName,uId:this.uId,type:this.type,dataValueTypeName:this.dataValueTypeName,referenceSchemaName:this.referenceSchemaName}}copy(){return new g({...this.toMetadata(),uId:(0,o.generateGuid)()})}isValid(){return Boolean(this.uId)}onDataSourceAttributeNameChanged(e,s,t){}}class B extends g{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleAttributeExpression",this.path="",this.scopeId="",e&&(this.path=e.path,this.scopeId=e.scopeId==="null"?"":e.scopeId)}toMetadata(){return{...super.toMetadata(),path:this.path,scopeId:this.scopeId}}copy(){return new B({...this.toMetadata(),uId:(0,o.generateGuid)()})}isValid(){return super.isValid()&&Boolean(this.path)}onDataSourceAttributeNameChanged(e,s,t){this.scopeId===e&&this.path===s&&(this.path=t)}}class N extends g{get value(){return this._value}set value(e){this._value!==e&&(this._displayValueInitialized=!1,this._value=e)}get referenceSchemaName(){return super.referenceSchemaName}set referenceSchemaName(e){this.referenceSchemaName!==e&&(super.referenceSchemaName=e,this._displayValueInitialized=!1)}get displayValue(){return this.isLookup&&this.referenceSchemaName?this._displayValueInitialized?this._displayValue:null:(this._displayValue=this.value,this._displayValueInitialized=!0,this._displayValue)}set displayValue(e){this._displayValue=e??"",this._displayValueInitialized=e!=null}get dataValueTypeName(){return super.dataValueTypeName}set dataValueTypeName(e){this.dataValueTypeName!==e&&(super.dataValueTypeName=e,this._displayValueInitialized=!1)}constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleValueExpression",this._value="",this._displayValue="",this._displayValueInitialized=!1,e&&(this._value=e.value)}initDisplayValue(){var e=this;return(0,E.Z)(function*(){if(e._displayValueInitialized)return Promise.resolve(e._displayValue);if(e.isLookup&&e.referenceSchemaName&&e._value){const s=yield Ce.getLookupValue(e.referenceSchemaName,e._value);e._displayValue=s.displayValue}else e._displayValue=e.value;return e._displayValueInitialized=!0,Promise.resolve(e._displayValue)})()}toMetadata(){return{...super.toMetadata(),value:this.value}}copy(){return new N({...this.toMetadata(),uId:(0,o.generateGuid)()})}isValid(){return super.isValid()?this.isLookup?(0,o.isGuid)(this.value):this.value!=null&&this.value!=="":!1}}class Me extends N{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleEmptyValueExpression"}isValid(){return!0}}class ee extends g{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleFilterValueExpression",this.leftExpression="",e&&(this.leftExpression=e.leftExpression,this.rightExpression=new N(e.rightExpression))}toMetadata(){return{...super.toMetadata(),leftExpression:this.leftExpression,rightExpression:this.rightExpression?.toMetadata()}}copy(){const e=new ee({...this.toMetadata(),uId:(0,o.generateGuid)()});return e.rightExpression=this.rightExpression.copy(),e}isValid(){return super.isValid()&&Boolean(this.leftExpression)&&Boolean(this.rightExpression)&&this.rightExpression.isValid()}}class se extends g{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleSysSettingExpression",this.sysSettingName="",e&&(this.sysSettingName=e.sysSettingName)}toMetadata(){return{...super.toMetadata(),sysSettingName:this.sysSettingName}}copy(){return new se({...this.toMetadata(),uId:(0,o.generateGuid)()})}isValid(){return super.isValid()&&Boolean(this.sysSettingName)}}class te extends g{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleSysValueExpression",this.sysValueName="",e&&(this.sysValueName=e.sysValueName)}toMetadata(){return{...super.toMetadata(),sysValueName:this.sysValueName}}copy(){return new te({...this.toMetadata(),uId:(0,o.generateGuid)()})}isValid(){return super.isValid()&&Boolean(this.sysValueName)}}class xe{get(e){return e?e.typeName==="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleAttributeExpression"?new B(e):e.typeName==="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleValueExpression"?new N(e):e.typeName==="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleEmptyValueExpression"?new Me(e):e.typeName==="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleFilterValueExpression"?new ee(e):e.typeName==="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleSysSettingExpression"?new se(e):e.typeName==="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleSysValueExpression"?new te(e):new g(e):new g}}class m extends Q{constructor(e){super(e),this._expressionFactory=new xe,this.typeName="Terrasoft.Core.BusinessRules.Models.BusinessRuleAction",this.executorName="",e&&(this.executorName=e.executorName,this.expression=new B(e.expression),e.value&&(this.value=this._expressionFactory.get(e.value)))}toMetadata(){return{...super.toMetadata(),executorName:this.executorName,expression:this.expression?.toMetadata(),value:this.value?.toMetadata()}}clone(){return new m(this.toMetadata())}copy(){const e=new m({...this.toMetadata(),uId:(0,o.generateGuid)()});return e.expression=this.expression?.copy(),e.value=this.value?.copy(),e}getApplicability(){if(!this.expression?.path)return[];const s=this.expression.path.split(".").shift();return s?[{path:s}]:[]}isValid(){return super.isValid()&&Boolean(this.expression?.isValid())&&Boolean(this.value?.isValid())}}class be extends Q{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetProperty"}}class A extends be{constructor(e){super(e),this.items=[],e&&(this.items=e.items?.length>0?e.items.split(","):[])}toMetadata(){return{...super.toMetadata(),items:this.items?.length>0?this.items.join(","):""}}getApplicability(){return this.isValid()?this.items.map(e=>({path:e})):[]}isValid(){return super.isValid()&&this.items?.length>0}}const Te="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionEditableElement";class v extends A{constructor(){super(...arguments),this.typeName=Te}clone(){return new v(this.toMetadata())}copy(){return new v({...this.toMetadata(),uId:(0,o.generateGuid)()})}}class F extends g{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleFilterLookupExpression",this.path="",this.filterExpression="",e&&(this.path=e.path,this.filterExpression=e.filterExpression==="null"?"":e.filterExpression)}toMetadata(){return{...super.toMetadata(),path:this.path,filterExpression:this.filterExpression}}copy(){return new F({...this.toMetadata(),uId:(0,o.generateGuid)()})}isValid(){return super.isValid()&&Boolean(this.path)&&Boolean(this.filterExpression)}}class D extends m{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionFilterLookup",this.clearValue=!1,this.populateValue=!1,e?(this.clearValue=e.clearValue??!1,this.populateValue=e.populateValue??!1):(this.clearValue=!0,this.populateValue=!0),this._processMetadata(e)}_isOldMetadataFormat(e){const s=!!e.expression?.path&&e.expression.path!=="null",t=e.value,i=!!t?.value&&t.value!=="null";return s&&i}_convertOldMetadata(e){const s={...e},t=e.expression?.path||"",n=e.value?.value,u={path:n,filterExpression:""},l={path:t,filterExpression:""};if(n.includes(".")){const[c,...J]=n.split(".");u.path=c,u.filterExpression=J.join(".")}return{...s,leftExpression:u,rightExpression:l}}_processMetadata(e){!e||(this._isOldMetadataFormat(e)&&(e=this._convertOldMetadata(e)),delete this.expression,delete this.value,this.leftExpression=new F(e?.leftExpression),this.rightExpression=new F(e?.rightExpression))}toMetadata(){return{...super.toMetadata(),leftExpression:this.leftExpression?.toMetadata(),rightExpression:this.rightExpression?.toMetadata(),clearValue:this.clearValue,populateValue:this.populateValue}}clone(){return new D({...this.toMetadata()})}copy(){return new D({...super.copy().toMetadata(),leftExpression:this.leftExpression?.toMetadata(),rightExpression:this.rightExpression?.toMetadata(),clearValue:this.clearValue,populateValue:this.populateValue})}getApplicability(){return this.leftExpression?.path?[{path:this.leftExpression.path}]:[]}isValid(){return Boolean(this.leftExpression?.isValid())&&Boolean(this.rightExpression?.path)}}class G extends A{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionHideElement"}clone(){return new G(this.toMetadata())}copy(){return new G({...this.toMetadata(),uId:(0,o.generateGuid)()})}}const Ee="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionOptionalElement";class L extends A{constructor(){super(...arguments),this.typeName=Ee}clone(){return new L(this.toMetadata())}copy(){return new L({...this.toMetadata(),uId:(0,o.generateGuid)()})}}const Ve="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionReadonlyElement";class k extends A{constructor(){super(...arguments),this.typeName=Ve}clone(){return new k(this.toMetadata())}copy(){return new k({...this.toMetadata(),uId:(0,o.generateGuid)()})}}const Be="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionRequiredElement";class j extends A{constructor(){super(...arguments),this.typeName=Be}clone(){return new j(this.toMetadata())}copy(){return new j({...this.toMetadata(),uId:(0,o.generateGuid)()})}}class U extends m{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetFilter",e&&(this.value=new N(e.value))}clone(){return new U(this.toMetadata())}copy(){return new U(super.copy().toMetadata())}getApplicability(){return this.expression?.path?[{path:this.expression.path}]:[]}}class O extends m{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetValue"}clone(){return new O(this.toMetadata())}copy(){return new O(super.copy().toMetadata())}}var ie;(function(r){r.DataSource="DataSource",r.Page="Page"})(ie||(ie={}));class q extends m{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleSetValueItem",this.scope=e?.scopeId??"",this.scope==="null"&&(this.scope="")}clone(){return new q(this.toMetadata())}copy(){return new q({...super.copy().toMetadata(),scopeId:this.scope})}toMetadata(){return{...super.toMetadata(),scopeId:this.scope}}getApplicability(){if(!this.expression?.path)return[];const s=this.expression.path.split(".").shift();if(!s)return[];const t={path:s};return this.scope!==""&&(t.applicability=ie.DataSource,t.scope=this.scope),[t]}}class W extends m{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetValues",this.items=[],e&&(this.items=e.items?.map(s=>new q(s)))}clone(){return new W(this.toMetadata())}copy(){return new W({...super.copy().toMetadata(),items:this.items.map(e=>e.toMetadata())})}toMetadata(){const e={...super.toMetadata(),items:this.items?.length>0?this.items.map(s=>s.toMetadata()):[]};return this.items?.length>0&&(delete e.expression,delete e.value),e}getApplicability(){return this.items?.length?this.items.flatMap(e=>e.getApplicability()):[]}isValid(){return this.items?.length>0&&this.items.every(e=>e.isValid())}}class $ extends A{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionShowElement"}clone(){return new $(this.toMetadata())}copy(){return new $({...this.toMetadata(),uId:(0,o.generateGuid)()})}}class Se{get(e){return e.typeName==="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionShowElement"?new $(e):e.typeName==="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionHideElement"?new G(e):e.typeName==="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionReadonlyElement"?new k(e):e.typeName==="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionEditableElement"?new v(e):e.typeName===Ee?new L(e):e.typeName===Be?new j(e):e.typeName==="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionFilterLookup"?new D(e):e.typeName==="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetFilter"?new U(e):e.typeName==="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetValue"?new O(e):e.typeName==="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetValues"?new W(e):new m(e)}}const ne="Terrasoft.Core.BusinessRules.Models.Conditions.BusinessRuleGroupCondition";class H extends S{constructor(e){super(e),this._businessRuleDesignExpressionFactory=new xe,this.typeName="Terrasoft.Core.BusinessRules.Models.Conditions.BusinessRuleCondition",this.comparisonType=a.BusinessRuleExpressionComparisonType.IsNull,e&&(e.leftExpression&&(this.leftExpression=this._businessRuleDesignExpressionFactory.get(e.leftExpression)),e.rightExpression&&(this.rightExpression=this._businessRuleDesignExpressionFactory.get(e.rightExpression)),e.comparisonType!=null&&(this.comparisonType=e.comparisonType))}toMetadata(){return{...super.toMetadata(),leftExpression:this.leftExpression?.toMetadata(),rightExpression:this.rightExpression?.toMetadata(),comparisonType:this.comparisonType}}copy(){const e=new H({...this.toMetadata(),uId:(0,o.generateGuid)()});return e.leftExpression=this.leftExpression?.copy(),e.rightExpression=this.rightExpression?.copy(),e}isValid(){if(!super.isValid()||this.comparisonType==null)return!1;const e=Boolean(this.leftExpression?.isValid());switch(this.comparisonType){case a.BusinessRuleExpressionComparisonType.IsNull:case a.BusinessRuleExpressionComparisonType.IsNotNull:return e;case a.BusinessRuleExpressionComparisonType.Equal:case a.BusinessRuleExpressionComparisonType.NotEqual:return e&&Boolean(this.rightExpression?.isValid());default:return!0}}onDataSourceAttributeNameChanged(e,s,t){this.leftExpression.onDataSourceAttributeNameChanged(e,s,t),this.rightExpression?.onDataSourceAttributeNameChanged(e,s,t)}_getAttributeExpressionWarningMessage(e){if(!e.dataValueTypeName)return null;const s=Object.values(a.DataValueTypeItems).find(t=>t.name===e.dataValueTypeName)?.type;return s===o.DataValueType.MAXSIZE_TEXT?{message:"BusinessRules.Errors.MaxSizeInConditionLimitedWarningMessage",type:"warn"}:s===o.DataValueType.RICH_TEXT||s===o.DataValueType.Image?{message:"BusinessRules.Errors.NotSupportedInConditionTypesWarningMessage",type:"error"}:null}getWarningMessages(){const e=[];if(this.comparisonType===a.BusinessRuleExpressionComparisonType.Equal||this.comparisonType===a.BusinessRuleExpressionComparisonType.NotEqual){if(this.leftExpression instanceof B){const s=this._getAttributeExpressionWarningMessage(this.leftExpression);s&&e.push(s)}if(this.rightExpression instanceof B){const s=this._getAttributeExpressionWarningMessage(this.rightExpression);s&&e.push(s)}}return e}}class z extends S{constructor(e){super(e),this.typeName=ne,this.logicalOperation=a.LogicalOperation.And,this.conditions=[],e&&(this.logicalOperation=e.logicalOperation,this.conditions=e.conditions?.map(s=>s.typeName===ne?new z(s):new H(s))??[])}_copyConditions(){return this.conditions.map(e=>e.copy())}toMetadata(){return{...super.toMetadata(),logicalOperation:this.logicalOperation,conditions:this.conditions.map(e=>e.toMetadata())}}copy(){const e=new z({...this.toMetadata(),uId:(0,o.generateGuid)()});return e.conditions=this._copyConditions(),e}isValid(){return super.isValid()&&this.conditions?this.conditions.length===0?!0:this.conditions.every(s=>s.isValid()):!1}onDataSourceAttributeNameChanged(e,s,t){this.conditions.forEach(i=>i.onDataSourceAttributeNameChanged(e,s,t))}getWarningMessages(){return this.conditions.map(e=>e.getWarningMessages()).flat()}}class Ie{get(e){return e.typeName===ne?new z(e):new H(e)}}class K{get actions(){return Object.freeze(this._actions)}constructor(e){this._businessRuleDesignActionFactory=new Se,this._businessRuleDesignConditionFactory=new Ie,this._typeName="Terrasoft.Core.BusinessRules.Models.BusinessRuleCase",this._actions=[],this.uId=e?.uId||(0,o.generateGuid)(),e?.condition?this.condition=this._businessRuleDesignConditionFactory.get(e.condition):this.condition=new P,e?.actions?.forEach(s=>{this._actions.push(this._businessRuleDesignActionFactory.get(s))})}_getActionIndex(e){return this.actions.findIndex(s=>s.uId===e.uId)}_actionsUpdateMetadata(e){const s=[];e.actions.forEach(i=>{s.push(i.uId);const n=this._businessRuleDesignActionFactory.get(i);this._getActionIndex(n)!==-1?this.updateAction(n):this.addAction(n)}),this.actions.filter(i=>!s.includes(i.uId)).forEach(i=>this.deleteAction(i))}_getActionsMetadata(){return this.actions.map(e=>e.toMetadata())}_getConditionMetadata(){const e=this.condition;return e&&!(e instanceof P)?e.toMetadata():null}_copyActions(){return this.actions.map(e=>e.copy())}_setActions(e){this._actions=[...e]}_copyCondition(){const e=this.condition;return e&&!(e instanceof P)?e.copy():new P}toMetadata(){const e=this._getConditionMetadata(),s=this._getActionsMetadata();return{typeName:this._typeName,uId:this.uId,condition:e,actions:s}}updateFromMetadata(e){e.condition&&this.updateCondition(this._businessRuleDesignConditionFactory.get(e.condition)),this._actionsUpdateMetadata(e)}addAction(e){if(this._getActionIndex(e)!==-1){console.warn(`Action ${e.uId} already exists`);return}this._actions=[...this._actions,e.clone()]}updateAction(e){const s=this._getActionIndex(e);if(s===-1){console.warn(`Action ${e.uId} not found`);return}this._actions=[...this._actions],this._actions.splice(s,1,e.clone())}deleteAction(e){const s=this._getActionIndex(e);s<0||(this._actions=[...this._actions],this._actions.splice(s,1))}updateCondition(e){this.condition=e}copy(){const e=new K({...this.toMetadata(),uId:(0,o.generateGuid)()});return e._setActions(this._copyActions()),e.condition=this._copyCondition(),e}onDataSourceAttributeNameChanged(e,s,t){this.condition.onDataSourceAttributeNameChanged(e,s,t),this._actions.forEach(i=>i.onDataSourceAttributeNameChanged(e,s,t))}}function De(r,e){return Object.values(r).indexOf(e)}class Z{constructor(e){this._typeName="Terrasoft.Core.BusinessRules.Models.Trigger",this.name="",this.type=a.BusinessRuleTriggerType.ChangeAttributeValue,this.scopeId="",this.uId=e?.uId||(0,o.generateGuid)(),e&&(this.name=e.name,this.type=Object.values(a.BusinessRuleTriggerType)[e.type||0],this.scopeId=e.scopeId)}toMetadata(){const e=De(a.BusinessRuleTriggerType,this.type);return{typeName:this._typeName,uId:this.uId,name:this.name,type:e,scopeId:this.scopeId}}copy(){return new Z({...this.toMetadata(),uId:(0,o.generateGuid)()})}}class re{get hasWarnings(){return this.getWarningMessages().length>0}constructor(e,s,t,i,n){this.caption=s,this.schemaName=t,this.schemaCaption=i,this.applicabilityType=n,this._typeName="Terrasoft.Core.BusinessRules.BusinessRule",this.name="",this.enabled=!0,this.triggers=[],this.cases=[],this.needToSave=!1,this.shouldGenerateCaption=!1,this.parentUId="",this.parentActionUId="",this.uId=e.uId,this.updateFromMetadata(e)}_updateCase(e){const s=this.cases.find(t=>t.uId===e.uId);if(s){s.updateFromMetadata(e);return}this.addCase(new K(e))}_casesUpdateMetadata(e){const s=[];e.cases?.forEach(t=>{s.push(t.uId),this._updateCase(t)}),this.cases=this.cases.filter(t=>s.includes(t.uId))}_copyCases(){return this.cases?.map(e=>e.copy())}_copyTriggers(){return this.triggers?.map(e=>e.copy())}_isValidCaption(){return this.caption.some(e=>e.value)}addTrigger(e,s,t=""){const i=Object.values(a.BusinessRuleTriggerType).indexOf(s),n=new Z({name:e,type:i,scopeId:t});return this.triggers.push(n),n.uId}addCase(e){this.cases.push(e)}getFirstCase(){let e=this.cases[0];return e||(e=new K,this.addCase(e),this.getFirstCase())}updateFromMetadata(e){this.parentUId=e.parentUId??"",this.parentActionUId=e.parentActionUId??"",this.name=e.name,this.enabled=e.enabled,this._casesUpdateMetadata(e),this.triggers=e.triggers?.map(s=>new Z(s))??[]}toMetadata(){const e={typeName:this._typeName,uId:this.uId,cases:this.cases.map(s=>s.toMetadata()),triggers:this.triggers.map(s=>s.toMetadata()),name:this.name,enabled:this.enabled};return this.parentUId&&(e.parentUId=this.parentUId),this.parentActionUId&&(e.parentActionUId=this.parentActionUId),e}clone(){const e=new re(this.toMetadata(),this.caption.clone(),this.schemaName,this.schemaCaption,this.applicabilityType);return e.needToSave=this.needToSave,e}copy(){const e=this.name,s=this.caption.clone();s.forEach(i=>{i.value&&(i.value=`Copy ${i.value}`)});const t=new re({...this.toMetadata(),uId:(0,o.generateGuid)()},s,this.schemaName,this.schemaCaption,this.applicabilityType);return t.name=`${e} (copy)`,t.cases=this._copyCases(),t.triggers=this._copyTriggers(),t}isValid(){if(!this._isValidCaption())return!1;const s=this.getFirstCase(),t=s?.condition,i=s?.actions;return t?.isValid()&&i?.length>0&&i.every(n=>n.isValid())}showInvalid(){return this.needToSave?!this.isValid():!1}onDataSourceAttributeNameChanged(e,s,t){this.cases.forEach(i=>i.onDataSourceAttributeNameChanged(e,s,t))}getWarningMessages(){const e=[],t=this.getFirstCase()?.condition;return t&&e.push(...t.getWarningMessages()),e}}var Ne=y(2876),f=y(27049),we=y(97600);const Ge=[a.BusinessRuleExpressionType.Const,a.BusinessRuleExpressionType.SysValue,a.BusinessRuleExpressionType.SysSetting];class R{constructor(){this._staticExpressionTypesSet=new Set(Ge)}_getIsExpressionStatic(e){return e?!!e.type&&this._staticExpressionTypesSet.has(e.type):!0}_getIsGroupConditionStatic(e){return e.conditions?e.conditions.every(s=>this._getIsConditionStatic(s)):!1}_getIsConditionStatic(e){if(!e)return!1;if(this._getIsConditionGroup(e)){const t=e;return this._getIsGroupConditionStatic(t)}const s=e;return(0,we.isNil)(s.leftExpression)&&(0,we.isNil)(s.rightExpression)?!1:this._getIsExpressionStatic(s.leftExpression)&&this._getIsExpressionStatic(s.rightExpression)}_getIsConditionGroup(e){return e.typeName===ne}_getBusinessRuleExpressionAttributesPath(e){return e&&"path"in e?e.path:""}_getGroupConditionAttributesPaths(e){const s=[];return e.conditions&&e.conditions.forEach(t=>{const i=this._getBusinessRuleConditionAttributePath(t);s.push(...i)}),s}_getBusinessRuleConditions(e){return!e.cases||e.cases.length===0?[]:e.cases.map(s=>s.condition).filter(s=>s!=null)}_getBusinessRulesConditions(e){return e.map(s=>this._getBusinessRuleConditions(s)).flat()}_getBusinessRuleConditionAttributePath(e){if(this._getIsConditionGroup(e)){const t=e;return this._getGroupConditionAttributesPaths(t)}const s=e;return[this._getBusinessRuleExpressionAttributesPath(s.leftExpression),this._getBusinessRuleExpressionAttributesPath(s.rightExpression)].filter(t=>t)}_getBusinessRulesConditionsAttributePaths(e){return e.map(s=>this._getBusinessRuleConditionAttributePath(s)).flat().filter(s=>s!=null)}_canExecuteByConditionsAttributePaths(e,s){const t=e.filter(n=>n.type!==a.BusinessRuleTriggerType.DataLoaded).map(n=>n.name);if(!t||t.length===0)return!1;const i=new Set(this._getBusinessRulesConditionsAttributePaths(s));return t.some(n=>i.has(n))}_contextReadyTriggerExists(e){return e.filter(t=>t.type===a.BusinessRuleTriggerType.ContextReady).length>0}_canExecuteByStaticConditions(e,s){return this._contextReadyTriggerExists(e)?s.some(t=>this._getIsConditionStatic(t)):!1}_canExecuteByEmptyConditions(e,s){return this._contextReadyTriggerExists(e)?s.some(t=>t.cases?.length>0&&t.cases.some(i=>!i.condition)):!1}canExecute(e,s){if(!s||s.length===0)return!1;const t=this._getBusinessRulesConditions(s),i=this._canExecuteByStaticConditions(e.triggers,t),n=this._canExecuteByEmptyConditions(e.triggers,s);return i||n?!0:this._canExecuteByConditionsAttributePaths(e.triggers,t)}}R.\u0275fac=function(e){return new(e||R)},R.\u0275prov=h.\u0275\u0275defineInjectable({token:R,factory:R.\u0275fac});class C{constructor(e){this._httpClient=e,this._businessRulesScopes=new Map,this._cachedLoadScopesRequests=new Map,this.serviceEndpoint="/ServiceModel/BusinessRulesManagerService.svc/",this.getBusinessRulesConfigMethodName="GetBusinessRules"}_getCachedBusinessRulesScopes(e){const s=[];return e.forEach(t=>{this._businessRulesScopes.has(t.scopeName)&&s.push({rules:this._businessRulesScopes.get(t.scopeName),scopeName:t.scopeName})}),s}_mapResponseToBusinessRules(e){return!e?.businessRules||e.businessRules.length===0?[]:e.businessRules.map(s=>{const t=JSON.parse(s.businessRulesConfig);return{scopeName:s.schemaName,rules:t}})}_getContextsScopeNames(e){return e.map(s=>s.scopeName)}_getContextsScopeNamesRequestKey(e){return this._getContextsScopeNames(e).join("_")}_getCachedLoadScopesRequest(e){const s=this._getContextsScopeNames(e),t=[...this._cachedLoadScopesRequests.keys()].find(i=>s.every(n=>i.includes(n)));return this._cachedLoadScopesRequests.get(t)}_getNotLoadedBusinessRulesScopes(e){if(e.length===0)return(0,p.of)([]);const s=this._getContextsScopeNames(e),t=this._getCachedLoadScopesRequest(e);if(t)return t.request$.pipe((0,p.map)(l=>l.filter(c=>s.includes(c.scopeName))));const i=`${this.serviceEndpoint}${this.getBusinessRulesConfigMethodName}`,n={scopes:e.map(l=>({name:l.scopeName,type:l.scopeType,modelType:l.modelType}))},u=this._httpClient.post(i,n).pipe((0,p.map)(l=>this._mapResponseToBusinessRules(l)),(0,p.tap)(l=>{l.forEach(c=>{this._businessRulesScopes.has(c.scopeName)||this._businessRulesScopes.set(c.scopeName,c.rules)})}),(0,p.tap)(()=>{const l=this._getContextsScopeNamesRequestKey(e);this._cachedLoadScopesRequests.delete(l)}),(0,p.share)());return this._cachedLoadScopesRequests.set(this._getContextsScopeNamesRequestKey(e),{request$:u,scopeNames:s}),u}getBusinessRulesByContexts(e){const s=this._getCachedBusinessRulesScopes(e),t=e.filter(n=>!this._businessRulesScopes.has(n.scopeName));return this._getNotLoadedBusinessRulesScopes(t).pipe((0,p.map)(n=>[...s,...n]))}}C.\u0275fac=function(e){return new(e||C)(h.\u0275\u0275inject(Ne.HttpClient))},C.\u0275prov=h.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac});class x{_getTriggerType(e){switch(e){case 0:return a.BusinessRuleTriggerType.ChangeAttributeValue;case 1:return a.BusinessRuleTriggerType.ChangeAttributeProperty;case 2:default:return a.BusinessRuleTriggerType.DataLoaded}}canExecute(e,s,t){const i=t.map(n=>n.triggers).flat();return i.length===0?!1:i.some(n=>{const u=this._getTriggerType(n.type);if(u===a.BusinessRuleTriggerType.DataLoaded&&e.scopeType===V.Model)return e.triggers.some(c=>c.type===u);if(!n.scopeId)return e.triggers.some(c=>c.name===n.name&&c.type===u);const l=s.find(c=>c.scopeId===n.scopeId);return l==null?!1:l.triggers.some(c=>c.name===n.name&&c.type===u)})}}x.\u0275fac=function(e){return new(e||x)},x.\u0275prov=h.\u0275\u0275defineInjectable({token:x,factory:x.\u0275fac});class _{constructor(e,s,t,i,n,u){this._businessRulesManager=e,this._businessRulesTriggerExecutor=s,this._businessRulesConditionExecutor=t,this._httpClient=i,this._messageChannelService=n,this._featureService=u,this._businessRulesResponseEventName="BusinessRuleExecutionResponse",this._serviceUrl="ServiceModel/BusinessRulesEngineService.svc/Execute",this._businessRulesRequestEventName="BusinessRuleExecutionRequest"}_useHttpChannel(){return(0,p.from)(this._featureService.getFeatureState("BRules-UseHttpChannel"))}_sendWebSocketMessage(e){const s=(0,o.generateGuid)();return e.businessRulesSessionId=s,new p.Observable(t=>{const i=this._messageChannelService.messageEvent$.pipe((0,f.map)(n=>n.body),(0,f.filter)(n=>n!=null),(0,f.filter)(n=>n.eventName===this._businessRulesResponseEventName),(0,f.filter)(n=>n.businessRulesSessionId===s),(0,f.map)(n=>n.payload)).subscribe({next:n=>{i.unsubscribe(),n.success?t.next(n.businessRulesResponse):(console.error("An error occurred during business rules execution. "+n.errorInfo.errorCode+": "+n.errorInfo.message),t.next([])),t.complete()},error:n=>{i.unsubscribe(),console.error("An error occurred during business rules execution. "+n.errorCode+": "+n.message),t.next([]),t.complete()},complete:()=>{i.unsubscribe(),t.error("WebSocket channel closed")}});this._messageChannelService.sendMessage(e,a.MessageChannelType.PTP).subscribe()})}_createWebSocketRequest(e){return{eventName:this._businessRulesRequestEventName,contexts:e}}_executeUsingWebSocket(e){return this._canExecuteBusinessRulesByContexts(e).pipe((0,f.switchMap)(s=>{if(s){const t=this._createWebSocketRequest(e);return this._sendWebSocketMessage(t)}return(0,p.of)([])}))}_logErrorMessageAndReturnDefBusinessRuleResponse(e){return console.error("An error occurred during business rules execution. "+e.errorCode+": "+e.message),(0,p.of)([])}_executeUsingHttp(e){return this._canExecuteBusinessRulesByContexts(e).pipe((0,f.switchMap)(s=>s?this._httpClient.post(this._serviceUrl,{contexts:e},{headers:new Ne.HttpHeaders({"Content-Type":"application/json"})}).pipe((0,f.mergeMap)(t=>t.success?(0,p.of)(t.businessRulesResponse):this._logErrorMessageAndReturnDefBusinessRuleResponse(t.errorInfo)),(0,f.catchError)(t=>this._logErrorMessageAndReturnDefBusinessRuleResponse(t))):(0,p.of)([])))}_canExecuteBusinessRulesByContexts(e){return this._businessRulesManager.getBusinessRulesByContexts(e).pipe((0,f.map)(s=>{const t=s.filter(i=>i.rules&&i.rules.length>0);return t.length===0?!1:t.some(i=>{const n=e.find(J=>J.scopeName===i.scopeName),u=e.filter(J=>J.parentScopeId===n.scopeId),l=this._businessRulesTriggerExecutor.canExecute(n,u,i.rules),c=this._businessRulesConditionExecutor.canExecute(n,i.rules);return l||c})}))}_getContextsWithScope(e){return e.filter(s=>s.scopeName&&s.scopeId)}execute(e){const s=this._getContextsWithScope(e);return s.length===0?(0,p.of)([]):this._useHttpChannel().pipe((0,f.switchMap)(t=>t?this._executeUsingHttp(s):this._executeUsingWebSocket(s)))}}_.\u0275fac=function(e){return new(e||_)(h.\u0275\u0275inject(C),h.\u0275\u0275inject(x),h.\u0275\u0275inject(R),h.\u0275\u0275inject(Ne.HttpClient),h.\u0275\u0275inject(a.MessageChannelService),h.\u0275\u0275inject(o.FeatureService))},_.\u0275prov=h.\u0275\u0275defineInjectable({token:_,factory:_.\u0275fac});class M{constructor(e){this._actionApplierFactory=e}applyRules(e,s){if(s&&s.length>0){const t=s.map(i=>{const n={id:i.scopeId,name:i.scopeName,type:i.scopeType,triggers:i.triggers};if(i.actions.length===0)return(0,p.of)(null);const u=i.actions.map(l=>this._actionApplierFactory.get(l).apply(e,n));return(0,p.forkJoin)(u)});return(0,p.forkJoin)(t)}return(0,p.of)(null)}}M.\u0275fac=function(e){return new(e||M)(h.\u0275\u0275inject(d))},M.\u0275prov=h.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac});class I{constructor(e){this._storageService=e,this._isBusinessRulesPropertiesPanelExpandedKey="isBusinessRulesPropertiesPanelExpanded",this._isBusinessRulePropertiesPanelExpanded=!0;const s=this._storageService.get(this._isBusinessRulesPropertiesPanelExpandedKey);this._isBusinessRulePropertiesPanelExpanded=s==="true",this.businessRulesPropertiesPanelExpandedChanged$=new p.BehaviorSubject(this._isBusinessRulePropertiesPanelExpanded)}changeBusinessRulePropertiesPanelExpandedState(e){e===void 0&&(e=!this._isBusinessRulePropertiesPanelExpanded),this._isBusinessRulePropertiesPanelExpanded=e,this._storageService.set(this._isBusinessRulesPropertiesPanelExpandedKey,`${e}`),this.businessRulesPropertiesPanelExpandedChanged$.next(e)}}I.\u0275fac=function(e){return new(e||I)(h.\u0275\u0275inject(a.StorageService))},I.\u0275prov=h.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac});function Le(){return`BusinessRule_${(0,o.generateGuid)().substring(0,7)}`}class w{}w.\u0275fac=function(e){return new(e||w)},w.\u0275mod=h.\u0275\u0275defineNgModule({type:w}),w.\u0275inj=h.\u0275\u0275defineInjector({providers:[_,C,M,d,x,R]});class oe extends Q{constructor(e){super(),this.uId=e?.uId||(0,o.generateGuid)(),this.customField=e?.customField||"",this.typeName=e?.typeName||""}toMetadata(){return{uId:this.uId,typeName:this.typeName,customField:this.customField}}clone(){return new oe(this.toMetadata())}copy(){return new oe({...this.toMetadata(),uId:(0,o.generateGuid)()})}onDataSourceAttributeNameChanged(e,s){throw new Error("Method not implemented.")}}}}]);
